<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CEX</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
    }
    label, select {
      margin: 10px 0;
      display: block;
    }
    a {
      display: inline-block;
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>CEX</h1>

  <label for="categoria">Categoría:</label>
  <select id="categoria"></select>

  <label for="tienda">Tienda:</label>
  <select id="tienda"></select>

  <div id="enlaceContainer">
    <a id="enlace" href="#" target="_blank">Enlace generado aparecerá aquí</a>
  </div>

  <div style="margin-top: 40px;">
    <a id="miBotonFinal" href="old.html">
      <button type="button">Vieja versión</button>
    </a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const categorias = [
        { id: 1093, nombre: "Game Boy Advance" },
        { id: 834, nombre: "Nintendo DS" },
        { id: 977, nombre: "Nintendo 3DS" },
        { id: 1027, nombre: "Super Nintendo" },
        { id: 1019, nombre: "Nintendo 64" },
        { id: 837, nombre: "Nintendo GameCube" },
        { id: 831, nombre: "Nintendo Wii" },
        { id: 996, nombre: "Nintendo Wii U" },
        { id: 1088, nombre: "PlayStation 1" },
        { id: 824, nombre: "PlayStation 2" },
        { id: 821, nombre: "PlayStation 3" },
        { id: 818, nombre: "Xbox" },
        { id: 827, nombre: "Xbox 360" },
        { id: 1002, nombre: "Xbox One" },
        { id: 1082, nombre: "Xbox Smart Delivery" },
        { id: 1083, nombre: "Xbox Series" },
      ];

      const tiendas = [
        { id: "Torrent+Avinguda", nombre: "Torrent" },
        { id: "Valencia+Factory+Bonaire", nombre: "Valencia Bonaire" },
        { id: "Valencia+Fernando", nombre: "Valencia Fernando" },
        { id: "Valencia+Ruzafa", nombre: "Valencia Ruzafa" },
        { id: "Valencia+Benimaclet", nombre: "Valencia Benimaclet" },
        { id: "Alicante+Alfonso+X+El+Sabio", nombre: "Alicante" },
        { id: "Elche+Glorieta", nombre: "Elche" },
        { id: "Murcia+Primo+de+Rivera", nombre: "Murcia" },
        { id: "Alcorcón+TresAguas", nombre: "Alcorcón" },
        { id: "Móstoles+Plaza+Pradillo", nombre: "Móstoles" },
        { id: "Leganés+Juan+Muñoz", nombre: "Leganés" },
        { id: "Getafe+Madrid~Getafe", nombre: "Móstoles" },
      ];

      const categoriaSelect = document.getElementById('categoria');
      const tiendaSelect = document.getElementById('tienda');
      const enlace = document.getElementById('enlace');

      function llenarDropdown(select, lista) {
        lista.forEach(item => {
          const option = document.createElement('option');
          option.value = item.id;
          option.textContent = item.nombre;
          select.appendChild(option);
        });
      }

      function actualizarEnlace() {
        const categoria = categoriaSelect.value;
        const tienda = tiendaSelect.value;
        const url = `https://es.webuy.com/search/?categoryIds=${categoria}&stores=${tienda}`;
        enlace.href = url;
        enlace.textContent = url;
      }

      categoriaSelect.addEventListener('change', actualizarEnlace);
      tiendaSelect.addEventListener('change', actualizarEnlace);

      // Inicializar dropdowns y generar primer enlace
      llenarDropdown(categoriaSelect, categorias);
      llenarDropdown(tiendaSelect, tiendas);
      actualizarEnlace();
    });
  </script>
</body>
</html>
